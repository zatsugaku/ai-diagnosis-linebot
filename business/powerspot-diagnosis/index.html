<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="çµ±è¨ˆå­¦çš„æ ¹æ‹ ã«åŸºã¥ãæœ¬æ ¼çš„ãƒ‘ãƒ¯ãƒ¼ã‚¹ãƒãƒƒãƒˆè¨ºæ–­ã‚µãƒ¼ãƒ“ã‚¹">
    <title>ç¸ãƒ‘ãƒ¯ãƒ¼ã‚¹ãƒãƒƒãƒˆè¨ºæ–­ã‚·ã‚¹ãƒ†ãƒ  v3.1</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Sans', 'Yu Gothic', 'Meiryo', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .form-section {
            margin-bottom: 25px;
        }

        .form-section h3 {
            color: #5a67d8;
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #4a5568;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #5a67d8;
            box-shadow: 0 0 0 3px rgba(90, 103, 216, 0.1);
        }

        .question-text {
            font-weight: bold;
            margin-bottom: 15px;
            color: #2d3748;
            font-size: 1.2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .radio-option {
            display: flex;
            align-items: flex-start;
            padding: 18px 22px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: #ffffff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            position: relative;
        }

        .radio-option::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: transparent;
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        .radio-option:hover {
            border-color: #5a67d8;
            background-color: #f8faff;
            transform: translateX(4px);
            box-shadow: 0 4px 16px rgba(90, 103, 216, 0.1);
        }

        .radio-option:hover::before {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .radio-option input[type="radio"] {
            margin-right: 15px;
            margin-top: 2px;
            transform: scale(1.4);
            accent-color: #5a67d8;
            flex-shrink: 0;
        }

        .radio-option.selected {
            border-color: #5a67d8;
            background: linear-gradient(135deg, #ebf4ff 0%, #f0f8ff 100%);
            box-shadow: 0 4px 20px rgba(90, 103, 216, 0.15);
            transform: translateX(4px);
        }

        .radio-option.selected::before {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .radio-text {
            line-height: 1.7;
            font-size: 1rem;
            color: #2d3748;
            flex: 1;
        }

        .radio-option.selected .radio-text {
            color: #2c5aa0;
            font-weight: 500;
        }

        /* é¸æŠè‚¢ã®å…ˆé ­ã«çµµæ–‡å­—ã‚’è¿½åŠ  */
        .radio-option[data-value="æœ¨"] .radio-text::before { content: "ğŸŒ± "; }
        .radio-option[data-value="ç«"] .radio-text::before { content: "ğŸ”¥ "; }
        .radio-option[data-value="åœŸ"] .radio-text::before { content: "ğŸŒ "; }
        .radio-option[data-value="é‡‘"] .radio-text::before { content: "âš¡ "; }
        .radio-option[data-value="æ°´"] .radio-text::before { content: "ğŸ’§ "; }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .results-area {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .results-area.show {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .loading {
            text-align: center;
            padding: 40px;
            display: none;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #5a67d8;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            background-color: #fed7d7;
            color: #c53030;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #e53e3e;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e2e8f0;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s ease;
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #e2e8f0;
            color: #a0aec0;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .step.active {
            background-color: #5a67d8;
            color: white;
        }

        .step.completed {
            background-color: #48bb78;
            color: white;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .card {
                padding: 20px;
            }
            
            .radio-option {
                padding: 12px;
            }
        }

        .materials-output {
            background-color: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }

        .section-title {
            color: #2d3748;
            border-bottom: 2px solid #5a67d8;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ç¸ãƒ‘ãƒ¯ãƒ¼ã‚¹ãƒãƒƒãƒˆè¨ºæ–­</h1>
            <p>çµ±è¨ˆå­¦çš„æ ¹æ‹ ã«åŸºã¥ãæœ¬æ ¼çš„ãƒ‘ãƒ¯ãƒ¼ã‚¹ãƒãƒƒãƒˆè¨ºæ–­ã‚·ã‚¹ãƒ†ãƒ  v3.1</p>
        </div>

        <!-- ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ -->
        <div class="step-indicator">
            <div class="step active" id="step1">1</div>
            <div class="step" id="step2">2</div>
            <div class="step" id="step3">3</div>
        </div>

        <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <!-- è¨ºæ–­ãƒ•ã‚©ãƒ¼ãƒ  -->
        <div class="card" id="diagnosisForm">
            <h2 class="section-title">ç¸ã®çµ±åˆåˆ†æè¨ºæ–­</h2>
            
            <!-- åŸºæœ¬æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="form-section">
                <h3>ğŸŒ¸ åŸºæœ¬æƒ…å ±</h3>
                
                <div class="input-group">
                    <label for="birthDate">ç”Ÿå¹´æœˆæ—¥</label>
                    <input type="date" id="birthDate" required>
                </div>

                <div class="input-group">
                    <label for="firstName">åå‰ï¼ˆãƒ­ãƒ¼ãƒå­—ï¼‰</label>
                    <input type="text" id="firstName" placeholder="ä¾‹: Taro" required>
                    <small style="color: #666; font-size: 0.9rem;">â€»ãƒ­ãƒ¼ãƒå­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„</small>
                </div>

                <div class="input-group">
                    <label for="lastName">è‹—å­—ï¼ˆãƒ­ãƒ¼ãƒå­—ï¼‰</label>
                    <input type="text" id="lastName" placeholder="ä¾‹: Yamada" required>
                    <small style="color: #666; font-size: 0.9rem;">â€»ãƒ­ãƒ¼ãƒå­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„</small>
                </div>

                <div class="input-group">
                    <div style="background: #f0f8ff; padding: 15px; border-radius: 8px; border-left: 4px solid #5a67d8;">
                        <h4 style="color: #5a67d8; margin-bottom: 8px;">ğŸ”® éŸ³éŸ»ã‚¿ã‚¤ãƒ—è‡ªå‹•åˆ¤å®š</h4>
                        <p style="color: #666; margin: 0; font-size: 0.95rem;">
                            å…¥åŠ›ã•ã‚ŒãŸåå‰ã‹ã‚‰éŸ³éŸ»ã®ç‰¹æ€§ã‚’åˆ†æã—ã€ç¸ã®ã‚¿ã‚¤ãƒ—ï¼ˆçµç¸ãƒ»æ·±ç¸ãƒ»åºƒç¸ï¼‰ã‚’è‡ªå‹•åˆ¤å®šã—ã¾ã™
                        </p>
                        <div id="nameAnalysisResult" style="margin-top: 10px; font-weight: bold; color: #5a67d8;">
                            åå‰ã‚’å…¥åŠ›ã™ã‚‹ã¨éŸ³éŸ»åˆ†æçµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™
                        </div>
                    </div>
                </div>
            </div>

            <!-- è¨ºæ–­è³ªå•ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="form-section">
                <h3>ğŸ”® ç¸ã®ä½“é¨“è¨ºæ–­</h3>
                
                <!-- è³ªå•1 -->
                <div class="input-group">
                    <div class="question-text">1. ã“ã‚Œã¾ã§ã®ä»•äº‹ã‚„ä¸»ãªæ´»å‹•ã«ã¤ã„ã¦ã€æœ€ã‚‚å½“ã¦ã¯ã¾ã‚‹ã‚‚ã®ã¯ï¼Ÿ</div>
                    <div class="radio-group">
                        <label class="radio-option" data-value="æœ¨" data-question="work">
                            <input type="radio" name="work_pattern" value="æœ¨">
                            <span class="radio-text">æ–°ã—ã„ã“ã¨ã‚’å­¦ã‚“ã ã‚Šã€äººã¨ã®ã¤ãªãŒã‚Šã‚’åºƒã’ã‚‹ã“ã¨ãŒå¤šã„</span>
                        </label>
                        <label class="radio-option" data-value="ç«" data-question="work">
                            <input type="radio" name="work_pattern" value="ç«">
                            <span class="radio-text">äººå‰ã§è©±ã—ãŸã‚Šã€æ´»ç™ºã«å‹•ãå›ã‚‹ã“ã¨ãŒå¤šã„</span>
                        </label>
                        <label class="radio-option" data-value="åœŸ" data-question="work">
                            <input type="radio" name="work_pattern" value="åœŸ">
                            <span class="radio-text">ç¶™ç¶šçš„ã§å®‰å®šã—ãŸä½œæ¥­ã‚„ã€äººã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ãŒå¤šã„</span>
                        </label>
                        <label class="radio-option" data-value="é‡‘" data-question="work">
                            <input type="radio" name="work_pattern" value="é‡‘">
                            <span class="radio-text">åŠ¹ç‡åŒ–ã‚„æ”¹å–„ã€è³ªã®å‘ä¸Šã«å–ã‚Šçµ„ã‚€ã“ã¨ãŒå¤šã„</span>
                        </label>
                        <label class="radio-option" data-value="æ°´" data-question="work">
                            <input type="radio" name="work_pattern" value="æ°´">
                            <span class="radio-text">çŠ¶æ³ã«å¿œã˜ã¦æŸ”è»Ÿã«å¯¾å¿œã—ãŸã‚Šã€æƒ…å ±ã‚’æ‰±ã†ã“ã¨ãŒå¤šã„</span>
                        </label>
                    </div>
                </div>

                <!-- è³ªå•2 -->
                <div class="input-group">
                    <div class="question-text">2. äººé–“é–¢ä¿‚ã«ãŠã„ã¦ã€ã‚ãªãŸãŒè‡ªç„¶ã«å–ã‚‹è¡Œå‹•ã¯ï¼Ÿ</div>
                    <div class="radio-group">
                        <label class="radio-option" data-value="æœ¨" data-question="relationship">
                            <input type="radio" name="relationship_style" value="æœ¨">
                            <span class="radio-text">ç›¸æ‰‹ã®æˆé•·ã‚’æ”¯æ´ã—ãŸã‚Šã€æ–°ã—ã„å¯èƒ½æ€§ã‚’ä¸€ç·’ã«æ¢ã‚‹</span>
                        </label>
                        <label class="radio-option" data-value="ç«" data-question="relationship">
                            <input type="radio" name="relationship_style" value="ç«">
                            <span class="radio-text">å ´ã‚’ç››ã‚Šä¸Šã’ãŸã‚Šã€çš†ã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é«˜ã‚ã‚‹</span>
                        </label>
                        <label class="radio-option" data-value="åœŸ" data-question="relationship">
                            <input type="radio" name="relationship_style" value="åœŸ">
                            <span class="radio-text">å®‰å¿ƒã§ãã‚‹ç’°å¢ƒã‚’ä½œã£ãŸã‚Šã€èª¿å’Œã‚’é‡è¦–ã™ã‚‹</span>
                        </label>
                        <label class="radio-option" data-value="é‡‘" data-question="relationship">
                            <input type="radio" name="relationship_style" value="é‡‘">
                            <span class="radio-text">çš„ç¢ºãªã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ã—ãŸã‚Šã€å“è³ªã®é«˜ã„é–¢ä¿‚ã‚’ç¯‰ã</span>
                        </label>
                        <label class="radio-option" data-value="æ°´" data-question="relationship">
                            <input type="radio" name="relationship_style" value="æ°´">
                            <span class="radio-text">ç›¸æ‰‹ã«åˆã‚ã›ã¦æŸ”è»Ÿã«å¯¾å¿œã—ãŸã‚Šã€æ·±ãç†è§£ã—ã‚ˆã†ã¨ã™ã‚‹</span>
                        </label>
                    </div>
                </div>

                <!-- è³ªå•3 -->
                <div class="input-group">
                    <div class="question-text">3. ã‚¹ãƒˆãƒ¬ã‚¹ã‚’æ„Ÿã˜ã‚‹æ™‚ã‚„å›°ã£ãŸæ™‚ã®å¯¾å‡¦æ³•ã¯ï¼Ÿ</div>
                    <div class="radio-group">
                        <label class="radio-option" data-value="æœ¨" data-question="stress">
                            <input type="radio" name="stress_handling" value="æœ¨">
                            <span class="radio-text">æ–°ã—ã„ç’°å¢ƒã«èº«ã‚’ç½®ã„ãŸã‚Šã€å­¦ã³ã‚„æˆé•·ã®æ©Ÿä¼šã‚’æ±‚ã‚ã‚‹</span>
                        </label>
                        <label class="radio-option" data-value="ç«" data-question="stress">
                            <input type="radio" name="stress_handling" value="ç«">
                            <span class="radio-text">äººã¨è©±ã—ãŸã‚Šã€æ´»å‹•çš„ã«ãªã£ã¦ç™ºæ•£ã™ã‚‹</span>
                        </label>
                        <label class="radio-option" data-value="åœŸ" data-question="stress">
                            <input type="radio" name="stress_handling" value="åœŸ">
                            <span class="radio-text">å®‰å®šã—ãŸç’°å¢ƒã§ä¼‘æ¯ã‚’å–ã£ãŸã‚Šã€ä¿¡é ¼ã§ãã‚‹äººã«ç›¸è«‡ã™ã‚‹</span>
                        </label>
                        <label class="radio-option" data-value="é‡‘" data-question="stress">
                            <input type="radio" name="stress_handling" value="é‡‘">
                            <span class="radio-text">è¨ˆç”»ã‚’ç«‹ã¦ç›´ã—ãŸã‚Šã€åŠ¹ç‡çš„ãªè§£æ±ºç­–ã‚’è€ƒãˆã‚‹</span>
                        </label>
                        <label class="radio-option" data-value="æ°´" data-question="stress">
                            <input type="radio" name="stress_handling" value="æ°´">
                            <span class="radio-text">çŠ¶æ³ã‚’å®¢è¦³è¦–ã—ãŸã‚Šã€æµã‚Œã«ä»»ã›ã¦æ§˜å­ã‚’è¦‹ã‚‹</span>
                        </label>
                    </div>
                </div>

                <!-- è³ªå•4 -->
                <div class="input-group">
                    <div class="question-text">4. ç†æƒ³çš„ãªç”Ÿæ´»ç’°å¢ƒã‚„éã”ã—æ–¹ã¯ï¼Ÿ</div>
                    <div class="radio-group">
                        <label class="radio-option" data-value="æœ¨" data-question="lifestyle">
                            <input type="radio" name="lifestyle_preference" value="æœ¨">
                            <span class="radio-text">å¤‰åŒ–ã«å¯Œã¿ã€å¸¸ã«æ–°ã—ã„åˆºæ¿€ã‚„å­¦ã³ãŒã‚ã‚‹ç’°å¢ƒ</span>
                        </label>
                        <label class="radio-option" data-value="ç«" data-question="lifestyle">
                            <input type="radio" name="lifestyle_preference" value="ç«">
                            <span class="radio-text">äººã¨ã®ã¤ãªãŒã‚ŠãŒè±Šå¯Œã§ã€ã‚¨ãƒãƒ«ã‚®ãƒƒã‚·ãƒ¥ã«æ´»å‹•ã§ãã‚‹ç’°å¢ƒ</span>
                        </label>
                        <label class="radio-option" data-value="åœŸ" data-question="lifestyle">
                            <input type="radio" name="lifestyle_preference" value="åœŸ">
                            <span class="radio-text">å®‰å®šã—ã¦ã„ã¦ã€ä¿¡é ¼ã§ãã‚‹äººã«å›²ã¾ã‚ŒãŸç©ã‚„ã‹ãªç’°å¢ƒ</span>
                        </label>
                        <label class="radio-option" data-value="é‡‘" data-question="lifestyle">
                            <input type="radio" name="lifestyle_preference" value="é‡‘">
                            <span class="radio-text">è³ªã®é«˜ã„ç’°å¢ƒã§ã€åŠ¹ç‡çš„ã«ç›®æ¨™ã‚’é”æˆã§ãã‚‹ç’°å¢ƒ</span>
                        </label>
                        <label class="radio-option" data-value="æ°´" data-question="lifestyle">
                            <input type="radio" name="lifestyle_preference" value="æ°´">
                            <span class="radio-text">è‡ªç”±åº¦ãŒé«˜ãã€çŠ¶æ³ã«å¿œã˜ã¦æŸ”è»Ÿã«é¸æŠã§ãã‚‹ç’°å¢ƒ</span>
                        </label>
                    </div>
                </div>
            </div>

            <button class="btn-primary" id="startDiagnosis">ç¸ã®çµ±åˆåˆ†æã‚’é–‹å§‹</button>
        </div>

        <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º -->
        <div class="loading" id="loadingArea">
            <div class="spinner"></div>
            <p>ç¸ã®çµ±åˆåˆ†æä¸­...</p>
            <p>60åˆ†é¡Ã—12ä½ç½®ã‚·ã‚¹ãƒ†ãƒ ã§è¨ˆç®—ã—ã¦ã„ã¾ã™</p>
        </div>

        <!-- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
        <div class="error-message" id="errorMessage">
            <strong>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</strong>
            <div id="errorText"></div>
        </div>

        <!-- çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div class="results-area" id="resultsArea">
            <div class="card">
                <h2 class="section-title">ğŸ¯ è¨ºæ–­çµæœ</h2>
                <div id="diagnosisResults"></div>
            </div>

            <div class="card">
                <h2 class="section-title">â­ ãŠã™ã™ã‚ãƒ‘ãƒ¯ãƒ¼ã‚¹ãƒãƒƒãƒˆ</h2>
                <div id="powerspotRecommendations"></div>
            </div>

            <div class="card">
                <h2 class="section-title">ğŸ“‹ Claudeç”¨ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆææ–™</h2>
                <p style="margin-bottom: 15px; color: #666;">
                    ä»¥ä¸‹ã®ææ–™ã‚’Claudeï¼ˆAIï¼‰ã«ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆã—ã¦ã€è©³ç´°ãªãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
                </p>
                <div class="materials-output" id="reportMaterials"></div>
                <button class="btn-primary" id="copyMaterials" style="margin-top: 15px;">
                    ææ–™ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScriptãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ -->
    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let diagnosisData = {};
        let currentStep = 1;

        // DOMãƒ­ãƒ¼ãƒ‰æ™‚ã®åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–
        function initializeApp() {
            console.log('ç¸ãƒ‘ãƒ¯ãƒ¼ã‚¹ãƒãƒƒãƒˆè¨ºæ–­ã‚·ã‚¹ãƒ†ãƒ  v3.1 åˆæœŸåŒ–ä¸­...');
            
            // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
            setupEventListeners();
            
            // ãƒ•ã‚©ãƒ¼ãƒ åˆæœŸåŒ–
            initializeForm();
            
            console.log('åˆæœŸåŒ–å®Œäº†');
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
        function setupEventListeners() {
            // è¨ºæ–­é–‹å§‹ãƒœã‚¿ãƒ³
            document.getElementById('startDiagnosis').addEventListener('click', handleDiagnosisStart);
            
            // ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®é¸æŠå‡¦ç†
            document.querySelectorAll('.radio-option').forEach(option => {
                option.addEventListener('click', handleRadioSelection);
            });

            // åå‰å…¥åŠ›ã®éŸ³éŸ»åˆ†æ
            document.getElementById('firstName').addEventListener('input', analyzeNameAcoustics);
            document.getElementById('lastName').addEventListener('input', analyzeNameAcoustics);

            // ææ–™ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³
            document.getElementById('copyMaterials').addEventListener('click', copyMaterialsToClipboard);

            // ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ã®é€²æ—æ›´æ–°
            document.getElementById('birthDate').addEventListener('change', updateProgress);
            document.getElementById('firstName').addEventListener('input', updateProgress);
            document.getElementById('lastName').addEventListener('input', updateProgress);
        }

        // ãƒ•ã‚©ãƒ¼ãƒ åˆæœŸåŒ–
        function initializeForm() {
            // ä»Šæ—¥ã®æ—¥ä»˜ã‚’è¨­å®šï¼ˆç”Ÿå¹´æœˆæ—¥ã®æœ€å¤§å€¤ã¨ã—ã¦ï¼‰
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('birthDate').setAttribute('max', today);
            
            // 1900å¹´ã‚’æœ€å°å€¤ã¨ã—ã¦è¨­å®š
            document.getElementById('birthDate').setAttribute('min', '1900-01-01');
        }

        // ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³é¸æŠå‡¦ç†
        function handleRadioSelection(event) {
            const clickedOption = event.currentTarget;
            const questionName = clickedOption.querySelector('input[type="radio"]').name;
            
            // åŒã˜ã‚°ãƒ«ãƒ¼ãƒ—ã®ä»–ã®é¸æŠã‚’è§£é™¤
            document.querySelectorAll(`input[name="${questionName}"]`).forEach(radio => {
                radio.closest('.radio-option').classList.remove('selected');
            });
            
            // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸé¸æŠè‚¢ã‚’é¸æŠçŠ¶æ…‹ã«
            clickedOption.classList.add('selected');
            clickedOption.querySelector('input[type="radio"]').checked = true;
            
            updateProgress();
        }

        // åå‰éŸ³éŸ»åˆ†æ
        function analyzeNameAcoustics() {
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const resultDiv = document.getElementById('nameAnalysisResult');
            
            console.log('åå‰åˆ†æå®Ÿè¡Œ:', firstName, lastName);
            
            if (!firstName && !lastName) {
                resultDiv.innerHTML = 'åå‰ã‚’å…¥åŠ›ã™ã‚‹ã¨éŸ³éŸ»åˆ†æçµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™';
                resultDiv.style.color = '#666';
                diagnosisData.nameType = null;
                updateProgress();
                return;
            }
            
            if (!firstName || !lastName) {
                resultDiv.innerHTML = '<span style="color: #e53e3e;">åå‰ã¨è‹—å­—ã®ä¸¡æ–¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>';
                diagnosisData.nameType = null;
                updateProgress();
                return;
            }
            
            // éŸ³éŸ»åˆ†æãƒ­ã‚¸ãƒƒã‚¯ï¼ˆç°¡æ˜“ç‰ˆï¼‰
            const nameType = determineNameAcousticType(firstName, lastName);
            const typeInfo = getNameTypeInfo(nameType);
            
            resultDiv.innerHTML = `
                <div style="color: #5a67d8; font-size: 1.1rem; margin-bottom: 5px;">
                    âœ¨ åˆ¤å®šçµæœ: <strong>${nameType}</strong>
                </div>
                <div style="color: #666; font-size: 0.95rem;">
                    ${typeInfo.description}
                </div>
            `;
            
            // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«ä¿å­˜
            diagnosisData.nameType = nameType;
            diagnosisData.firstName = firstName;
            diagnosisData.lastName = lastName;
            
            console.log('éŸ³éŸ»åˆ†æçµæœ:', nameType);
            updateProgress();
        }

        // åå‰éŸ³éŸ»ã‚¿ã‚¤ãƒ—åˆ¤å®š
        function determineNameAcousticType(firstName, lastName) {
            const fullName = (firstName + lastName).toLowerCase();
            
            // æ¯éŸ³ã‚«ã‚¦ãƒ³ãƒˆ
            const vowels = (fullName.match(/[aiueo]/g) || []).length;
            const consonants = fullName.length - vowels;
            const vowelRatio = vowels / fullName.length;
            
            // éŸ³éŸ»ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ
            const hasRepeatingVowels = /([aiueo])\1/.test(fullName);
            const hasFlowingPattern = /[aiueo][aiueo]/.test(fullName);
            const hasSharpSounds = /[kst]/.test(fullName);
            
            // åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯
            if (vowelRatio > 0.5 && hasFlowingPattern) {
                return 'æ·±ç¸'; // æ·±ã„ã¤ãªãŒã‚Šã‚’è‚²ã‚€éŸ³
            } else if (hasRepeatingVowels || vowelRatio > 0.6) {
                return 'åºƒç¸'; // å¹…åºƒã„ç¸ã‚’ç¯‰ãéŸ³
            } else {
                return 'çµç¸'; // æ–°ã—ã„å‡ºä¼šã„ã‚’å¼•ãå¯„ã›ã‚‹éŸ³
            }
        }

        // åå‰ã‚¿ã‚¤ãƒ—æƒ…å ±å–å¾—
        function getNameTypeInfo(nameType) {
            const typeInfoMap = {
                'çµç¸': {
                    description: 'æ–°ã—ã„å‡ºä¼šã„ã‚„æ©Ÿä¼šã‚’å¼•ãå¯„ã›ã‚‹éŸ³éŸ»ç‰¹æ€§'
                },
                'æ·±ç¸': {
                    description: 'æ·±ãç¶™ç¶šçš„ãªã¤ãªãŒã‚Šã‚’è‚²ã‚€éŸ³éŸ»ç‰¹æ€§'
                },
                'åºƒç¸': {
                    description: 'å¹…åºƒã„äººè„ˆã‚„å¤šæ§˜ãªç¸ã‚’ç¯‰ãéŸ³éŸ»ç‰¹æ€§'
                }
            };
            
            return typeInfoMap[nameType] || typeInfoMap['çµç¸'];
        }
        function updateProgress() {
            const requiredFields = [
                'birthDate',
                'nameType'
            ];
            
            const requiredRadios = [
                'work_pattern',
                'relationship_style', 
                'stress_handling',
                'lifestyle_preference'
            ];
            
            let completed = 0;
            const total = requiredFields.length + requiredRadios.length;
            
            // é€šå¸¸ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒã‚§ãƒƒã‚¯
            requiredFields.forEach(fieldId => {
                if (document.getElementById(fieldId).value) {
                    completed++;
                }
            });
            
            // ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®ãƒã‚§ãƒƒã‚¯
            requiredRadios.forEach(radioName => {
                if (document.querySelector(`input[name="${radioName}"]:checked`)) {
                    completed++;
                }
            });
            
            const progress = (completed / total) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // ã‚¹ãƒ†ãƒƒãƒ—æ›´æ–°
            updateStepIndicator(progress);
        }

        // ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼æ›´æ–°
        function updateStepIndicator(progress) {
            const steps = document.querySelectorAll('.step');
            
            if (progress >= 33) {
                steps[0].classList.add('completed');
                steps[0].classList.remove('active');
                steps[1].classList.add('active');
                currentStep = 2;
            }
            
            if (progress >= 66) {
                steps[1].classList.add('completed');
                steps[1].classList.remove('active');
                steps[2].classList.add('active');
                currentStep = 3;
            }
            
            if (progress === 100) {
                steps[2].classList.add('completed');
            }
        }

        // è¨ºæ–­é–‹å§‹å‡¦ç†
        async function handleDiagnosisStart() {
            console.log('è¨ºæ–­é–‹å§‹ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ');
            
            try {
                // ãƒ•ã‚©ãƒ¼ãƒ æ¤œè¨¼
                if (!validateForm()) {
                    console.log('ãƒ•ã‚©ãƒ¼ãƒ æ¤œè¨¼å¤±æ•—');
                    return;
                }
                
                console.log('ãƒ•ã‚©ãƒ¼ãƒ æ¤œè¨¼æˆåŠŸ');
                
                // ãƒ‡ãƒ¼ã‚¿åé›†
                collectFormData();
                console.log('ãƒ‡ãƒ¼ã‚¿åé›†å®Œäº†:', diagnosisData);
                
                // UIæ›´æ–°ï¼ˆãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºï¼‰
                showLoading();
                console.log('ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºé–‹å§‹');
                
                // è¨ºæ–­å®Ÿè¡Œ
                await executeDiagnosis();
                console.log('è¨ºæ–­å®Ÿè¡Œå®Œäº†');
                
                // çµæœè¡¨ç¤º
                displayResults();
                console.log('çµæœè¡¨ç¤ºå®Œäº†');
                
            } catch (error) {
                console.error('è¨ºæ–­ã‚¨ãƒ©ãƒ¼:', error);
                showError('è¨ºæ–­ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + error.message);
            }
        }

        // ãƒ•ã‚©ãƒ¼ãƒ æ¤œè¨¼
        function validateForm() {
            console.log('ãƒ•ã‚©ãƒ¼ãƒ æ¤œè¨¼é–‹å§‹');
            console.log('ç¾åœ¨ã®diagnosisData:', diagnosisData);
            
            const requiredFields = [
                { id: 'birthDate', name: 'ç”Ÿå¹´æœˆæ—¥' },
                { id: 'firstName', name: 'åå‰' },
                { id: 'lastName', name: 'è‹—å­—' }
            ];
            
            const requiredRadios = [
                { name: 'work_pattern', label: 'ä»•äº‹ãƒ»æ´»å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³' },
                { name: 'relationship_style', label: 'äººé–“é–¢ä¿‚ã‚¹ã‚¿ã‚¤ãƒ«' },
                { name: 'stress_handling', label: 'ã‚¹ãƒˆãƒ¬ã‚¹å¯¾å‡¦æ³•' },
                { name: 'lifestyle_preference', label: 'ç†æƒ³çš„ãªç”Ÿæ´»ç’°å¢ƒ' }
            ];
            
            // é€šå¸¸ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ¤œè¨¼
            for (const field of requiredFields) {
                const element = document.getElementById(field.id);
                if (!element.value) {
                    showError(`${field.name}ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚`);
                    element.focus();
                    return false;
                }
            }
            
            // ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³æ¤œè¨¼
            for (const radio of requiredRadios) {
                const checkedRadio = document.querySelector(`input[name="${radio.name}"]:checked`);
                if (!checkedRadio) {
                    showError(`${radio.label}ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚`);
                    return false;
                }
                console.log(`${radio.name}:`, checkedRadio.value);
            }
            
            // åå‰éŸ³éŸ»ãƒã‚§ãƒƒã‚¯
            if (!diagnosisData.nameType) {
                showError('åå‰ã®éŸ³éŸ»åˆ†æãŒå®Œäº†ã—ã¦ã„ã¾ã›ã‚“ã€‚åå‰ã¨è‹—å­—ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return false;
            }
            
            console.log('ãƒ•ã‚©ãƒ¼ãƒ æ¤œè¨¼æˆåŠŸ');
            return true;
        }

        // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
        function showLoading() {
            console.log('showLoadingå®Ÿè¡Œ');
            document.getElementById('diagnosisForm').style.display = 'none';
            document.getElementById('loadingArea').classList.add('show');
            document.getElementById('errorMessage').classList.remove('show');
        }

        // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°éè¡¨ç¤º
        function hideLoading() {
            console.log('hideLoadingå®Ÿè¡Œ');
            document.getElementById('loadingArea').classList.remove('show');
        }

        // ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
        function showError(message) {
            console.log('showErrorå®Ÿè¡Œ:', message);
            document.getElementById('errorText').textContent = message;
            document.getElementById('errorMessage').classList.add('show');
            document.getElementById('loadingArea').classList.remove('show');
        }

        // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿åé›†
        function collectFormData() {
            diagnosisData = {
                ...diagnosisData, // æ—¢å­˜ã®åå‰ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒ
                birthDate: document.getElementById('birthDate').value,
                workPattern: document.querySelector('input[name="work_pattern"]:checked').value,
                relationshipStyle: document.querySelector('input[name="relationship_style"]:checked').value,
                stressHandling: document.querySelector('input[name="stress_handling"]:checked').value,
                lifestylePreference: document.querySelector('input[name="lifestyle_preference"]:checked').value
            };
            
            console.log('åé›†ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿:', diagnosisData);
        }

        // è¨ºæ–­å®Ÿè¡Œï¼ˆãƒ¢ãƒƒã‚¯å®Ÿè£…ï¼‰
        async function executeDiagnosis() {
            // è¨ºæ–­ãƒ­ã‚¸ãƒƒã‚¯ãŒå®Ÿè£…ã•ã‚Œã‚‹ã¾ã§ã®ãƒ¢ãƒƒã‚¯å‡¦ç†
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            // TODO: å®Ÿéš›ã®è¨ºæ–­ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã“ã“ã«å®Ÿè£…
            // ç¾åœ¨ã¯ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™
            diagnosisData.results = {
                naturalType: "æœ¨ã®æ˜¥éœ",
                position: 1,
                element: "æœ¨",
                phenomena: "æ˜¥éœ",
                compatibility: 85,
                spots: [
                    { name: "æ˜æ²»ç¥å®®", prefecture: "æ±äº¬éƒ½", compatibility: 95 },
                    { name: "ä¼Šå‹¢ç¥å®®", prefecture: "ä¸‰é‡çœŒ", compatibility: 92 },
                    { name: "å‡ºé›²å¤§ç¤¾", prefecture: "å³¶æ ¹çœŒ", compatibility: 89 }
                ]
            };
            
            console.log('è¨ºæ–­å®Œäº†:', diagnosisData.results);
        }

        // çµæœè¡¨ç¤º
        function displayResults() {
            hideLoading();
            
            // è¨ºæ–­çµæœã‚’è¡¨ç¤º
            displayDiagnosisResults();
            
            // ãƒ‘ãƒ¯ãƒ¼ã‚¹ãƒãƒƒãƒˆæ¨è–¦ã‚’è¡¨ç¤º
            displayPowerspotRecommendations();
            
            // ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆææ–™ã‚’è¡¨ç¤º
            displayReportMaterials();
            
            // çµæœã‚¨ãƒªã‚¢ã‚’è¡¨ç¤º
            document.getElementById('resultsArea').classList.add('show');
            
            // çµæœã‚¨ãƒªã‚¢ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            document.getElementById('resultsArea').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }

        // è¨ºæ–­çµæœè¡¨ç¤º
        function displayDiagnosisResults() {
            const resultsDiv = document.getElementById('diagnosisResults');
            const results = diagnosisData.results;
            
            resultsDiv.innerHTML = `
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <h3 style="margin-bottom: 10px;">âœ¨ ã‚ãªãŸã®ç¸ã‚¿ã‚¤ãƒ—</h3>
                    <h2 style="font-size: 2rem; margin-bottom: 10px;">${results.naturalType}</h2>
                    <p>äº”è¡Œå±æ€§: ${results.element} | è‡ªç„¶ç¾è±¡: ${results.phenomena} | ä½ç½®: ${results.position}ç•ª</p>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div style="background: #f0fff4; padding: 15px; border-radius: 8px; border-left: 4px solid #38a169;">
                        <h4 style="color: #38a169; margin-bottom: 8px;">ç¸ã®å¼·ã•</h4>
                        <div style="font-size: 1.5rem; font-weight: bold; color: #2f855a;">${results.compatibility}%</div>
                    </div>
                    
                    <div style="background: #fffaf0; padding: 15px; border-radius: 8px; border-left: 4px solid #ed8936;">
                        <h4 style="color: #ed8936; margin-bottom: 8px;">å¸Œå°‘æ€§</h4>
                        <div style="font-size: 1.5rem; font-weight: bold; color: #c05621;">ä¸Šä½8%</div>
                    </div>
                </div>
                
                <div style="margin-top: 20px; padding: 15px; background: #f7fafc; border-radius: 8px;">
                    <h4 style="color: #4a5568; margin-bottom: 10px;">åŸºæœ¬ç‰¹æ€§</h4>
                    <p style="line-height: 1.8; color: #2d3748;">
                        ${results.naturalType}ã‚¿ã‚¤ãƒ—ã¯ã€æ–°ã—ã„å§‹ã¾ã‚Šã¨æˆé•·ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æŒã¤ç¨€å°‘ãªç¸è³ªã§ã™ã€‚
                        è‡ªç„¶ã®æ˜¥éœã®ã‚ˆã†ã«ã€æŸ”ã‚‰ã‹ã§ä¸Šå“ãªé­…åŠ›ã‚’æŒã¡ã€äººã¨ã®å‡ºä¼šã„ã«æµã¾ã‚Œã‚„ã™ã„ç‰¹æ€§ãŒã‚ã‚Šã¾ã™ã€‚
                    </p>
                </div>
            `;
        }

        // ãƒ‘ãƒ¯ãƒ¼ã‚¹ãƒãƒƒãƒˆæ¨è–¦è¡¨ç¤º
        function displayPowerspotRecommendations() {
            const recommendationsDiv = document.getElementById('powerspotRecommendations');
            const results = diagnosisData.results;
            
            let html = '';
            results.spots.forEach((spot, index) => {
                html += `
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 15px; border-left: 4px solid #5a67d8; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 10px;">
                            <h4 style="color: #2d3748; margin: 0; font-size: 1.2rem;">${index + 1}. ${spot.name}</h4>
                            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 5px 12px; border-radius: 20px; font-weight: bold;">
                                ${spot.compatibility}%
                            </div>
                        </div>
                        <p style="color: #666; margin: 5px 0;">ğŸ“ ${spot.prefecture}</p>
                        <p style="color: #4a5568; margin: 10px 0; line-height: 1.6;">
                            ã‚ãªãŸã®ã€Œ${results.naturalType}ã€ã¨ã®ç›¸æ€§ãŒéå¸¸ã«é«˜ã„ãƒ‘ãƒ¯ãƒ¼ã‚¹ãƒãƒƒãƒˆã§ã™ã€‚
                        </p>
                    </div>
                `;
            });
            
            recommendationsDiv.innerHTML = html;
        }

        // ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆææ–™è¡¨ç¤º
        function displayReportMaterials() {
            const materialsDiv = document.getElementById('reportMaterials');
            const data = diagnosisData;
            
            const materials = `
ã€ç¸ãƒ‘ãƒ¯ãƒ¼ã‚¹ãƒãƒƒãƒˆè¨ºæ–­ - Claudeç”¨ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆææ–™ã€‘

â–  åŸºæœ¬æƒ…å ±
- ç”Ÿå¹´æœˆæ—¥: ${data.birthDate}
- åå‰: ${data.firstName} ${data.lastName}
- éŸ³éŸ»ã‚¿ã‚¤ãƒ—: ${data.nameType}

â–  è¨ºæ–­çµæœ
- è‡ªç„¶ã‚¿ã‚¤ãƒ—: ${data.results.naturalType}
- äº”è¡Œå±æ€§: ${data.results.element}
- è‡ªç„¶ç¾è±¡: ${data.results.phenomena}
- ä½ç½®ç•ªå·: ${data.results.position}
- ç¸ã®å¼·ã•: ${data.results.compatibility}%

â–  äº”è¡Œç¸å‹åˆ†æ
- ä»•äº‹ãƒ‘ã‚¿ãƒ¼ãƒ³: ${data.workPattern}ç³»çµ±
- äººé–“é–¢ä¿‚: ${data.relationshipStyle}ç³»çµ±
- ã‚¹ãƒˆãƒ¬ã‚¹å¯¾å‡¦: ${data.stressHandling}ç³»çµ±
- ç”Ÿæ´»ç’°å¢ƒ: ${data.lifestylePreference}ç³»çµ±

â–  ãŠã™ã™ã‚ãƒ‘ãƒ¯ãƒ¼ã‚¹ãƒãƒƒãƒˆ
${data.results.spots.map((spot, i) => `${i + 1}. ${spot.name}ï¼ˆ${spot.prefecture}ï¼‰- ç›¸æ€§${spot.compatibility}%`).join('\n')}

â–  ãƒ¬ãƒãƒ¼ãƒˆç”ŸæˆæŒ‡ç¤º
ã“ã®ææ–™ã‚’åŸºã«ã€ä»¥ä¸‹ã®ä»•æ§˜ã§ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ï¼š
- æ–‡å­—æ•°: 15,000-18,000å­—
- æ§‹æˆ: ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«åˆ†æ + ã‚¹ãƒãƒƒãƒˆè©³ç´° + å¹´é–“ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹
- å€‹äººåŒ–åº¦: 80%ä»¥ä¸Š
- æ ¹æ‹ : çµ±è¨ˆå­¦çš„æ ¹æ‹ ã‚’æ˜ç¤º
- è¡¨ç¾: ç¾ã—ã„æ—¥æœ¬èªè¡¨ç¾ã‚’ä½¿ç”¨
            `;
            
            materialsDiv.textContent = materials;
        }

        // ææ–™ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
        async function copyMaterialsToClipboard() {
            try {
                const materials = document.getElementById('reportMaterials').textContent;
                await navigator.clipboard.writeText(materials);
                
                // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                const button = document.getElementById('copyMaterials');
                const originalText = button.textContent;
                button.textContent = 'âœ… ã‚³ãƒ”ãƒ¼å®Œäº†ï¼';
                button.style.background = '#48bb78';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                }, 2000);
                
            } catch (error) {
                console.error('ã‚³ãƒ”ãƒ¼å¤±æ•—:', error);
                alert('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚');
            }
        }
    </script>
</body>
</html>
